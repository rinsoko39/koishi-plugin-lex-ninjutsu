# koishi-plugin-lex-ninjutsu

握握手，握握双手。

[![npm](https://img.shields.io/npm/v/koishi-plugin-lex-ninjutsu?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-lex-ninjutsu)

这是一个部署在聊天机器人 Koishi 上的插件。本插件可用于释放忍术，即在聊天中发送忍术音频。

## 使用教程

### 部署

首先，确保你有一个正在运行的 Koishi 机器人。

Koishi 的官方插件市场源已不再更新。若要能在插件市场中获取该插件，请于 market 插件设置中修改 `search.endpoint` 为一个可用的源。可以从 <https://forum.koishi.xyz/t/topic/4000> 等地获取可用的源的链接。

修改完成后，在 Koishi 控制台的插件市场中搜索 `lex-ninjutsu` 并安装。

打开插件配置界面并选择全局设置，点击右上角的添加插件按钮，搜索 `lex-ninjutsu` 并添加。

确保你安装了 database 和 http 服务。

上述操作完成后，就可以使用该插件了。

### 使用

首先，需要 `忍术 更新` 指令从忍法帖中获取忍术信息。该指令默认需要 3 级以上的权限。

更新完成后，在聊天中输入 `释放忍术 忍术名` 或 `忍术 释放 忍术名` 即可释放忍术，例如 `释放忍术 吓我一跳我释放忍术`。

`忍术 信息` 可用于查询忍术的信息。`忍术 搜索` 可用于搜索忍术。

### 修改匹配条件

由于忍法帖中的许多忍术名称带有标点符号，并且符号较为混乱（如「握握手 握握双手」「太痛苦了，太痛苦了」），默认的匹配条件忽略标点符号。例如，「握握手握握双手」「握握手？握握双手！」都被视为「握握手 握握双手」。将设置中的 `matchLevel` 改为 strict，匹配条件将修改为必须与忍法帖中完全一致（不推荐）。

---

许多时候，由于忍者释放忍术时较为匆忙，忍术中的字可能出现偏差。例如，不慎将「岚刀一直切」输成「蓝刀一直切」，而忍法帖中暂未收录该条目。为解决该问题，将设置中的 `matchLevel` 改为 homophone，则只要发音相同，就可以匹配。

不过，要使该项设置有效运行，首先需要 `pinyin` 服务，以识别忍术的发音。在插件市场中搜索 `pinyin` 并安装，在插件配置中添加该插件并运行即可。

注意，该插件对多音字的识别并不理想，有时候仍然会出现问题。

## 插件信息

### 依赖服务

- **database**：必需服务。用于存储忍术信息。
- **http**：必需服务。用于访问忍法帖。
- **pinyin**：可选服务。用于解析忍术读音。
